<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æ€¡ã®Todo List ğŸ“</title>
  <link href="https://fonts.googleapis.com/css2?family=Jacquarda+Bastarda+9&display=swap" rel="stylesheet">
  <style>
    /* ==============================
       å…¨å±€æ ·å¼
    ============================== */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      background-color: #f8eaf1;  /* é¡µé¢èƒŒæ™¯è‰²ï¼Œä¿®æ”¹è¿™é‡Œæ›´æ”¹èƒŒæ™¯ */
      font-family: 'Press Start 2P', Jacquarda Bastarda 9 ï¼Œcursive, sans-serif;
      color: #333;
      padding: 20px;
    }

/* æ•´ä½“å®¹å™¨ */
.cat-container {
  position: relative; /* ä¿è¯ä¸ŠåŠèº«å’Œä¸‹åŠèº«ç›¸å¯¹äºå®¹å™¨å®šä½ */
  display: flex;      /* ä½¿ç”¨flexå¸ƒå±€ */
  flex-direction: column; /* ä¸Šä¸‹æ’åˆ— */
  justify-content: flex-start; /* ä¸ŠåŠèº«å’Œä¸‹åŠèº«é é¡¶éƒ¨æ’åˆ— */
}

/* å°çŒ«çš„ä¸ŠåŠèº« */
.cat-upper {
  width: 128px; /* æ ¹æ®å›¾åƒå®é™…å¤§å°è°ƒæ•´ */
  height: 104px; /* æ ¹æ®å›¾åƒå®é™…å¤§å°è°ƒæ•´ */
  animation: breathe 2s ease-in-out infinite; /* å‘¼å¸åŠ¨ç”» */
  position: relative; /* ç¡®ä¿å®ƒä¸é‡å  */
}

/* å°çŒ«çš„ä¸‹åŠèº« */
.cat-lower {
  width: 128px; /* æ ¹æ®å›¾åƒå®é™…å¤§å°è°ƒæ•´ */
  height: 24px; /* æ ¹æ®å›¾åƒå®é™…å¤§å°è°ƒæ•´ */
  position: relative; /* ç¡®ä¿å®ƒä¸é‡å  */
  margin-top: -1px; /* è½»å¾®è°ƒæ•´ä½ç½®ï¼Œé˜²æ­¢ä¸¤ä¸ªéƒ¨åˆ†ä¹‹é—´çš„ç©ºéš™ */
}

/* å°çŒ«çš„å‘¼å¸æ•ˆæœ */
@keyframes breathe {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.01); /* å¾®æ”¾å¤§ */
  }
  100% {
    transform: scale(1);
  }
}

/* éŸ³ä¹æ’­æ”¾å™¨æ‚¬æµ®çª— */
.music-player {
  position: fixed;
  bottom: 10px;
  right: 10px;
  background-color: rgba(0, 0, 0, 0.4);
  color: white;
  border-radius: 10px;
  padding: 10px;
  width: 250px;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  justify-content: space-between;
  font-family: Arial, sans-serif;
  box-shadow: 0px 4px 15px rgba(0, 0, 0, 0.3);
  z-index: 9999; /* ç¡®ä¿æ’­æ”¾å™¨åœ¨é¡µé¢ä¹‹ä¸Š */

    /* æ·»åŠ èƒŒæ™¯è™šåŒ–æ•ˆæœ */
    backdrop-filter: blur(5px); /* èƒŒæ™¯è™šåŒ– */
  -webkit-backdrop-filter: blur(5px); /* å…¼å®¹Safari */
}

/* æ’­æ”¾æš‚åœæŒ‰é’®æ ·å¼ */
.play-pause-btn {
  background-color: transparent;
  border: none;
  font-size: 20px;
  color: white;
  cursor: pointer;
  padding: 0;
}

/* æ­Œæ›²ä¿¡æ¯æ˜¾ç¤º */
.song-info {
  display: flex;
  flex-direction: column;
  width: 100%;
  text-align: center;
}

.song-name {
  font-size: 14px;
  margin-bottom: 5px;
}

/* æ­Œæ›²è¿›åº¦æ¡ */
.progress-bar {
  width: 100%;
  margin-top: 5px;
  -webkit-appearance: none;
  appearance: none;
  height: 5px;
  background: #ccc;
  border-radius: 5px;
}

.progress-bar::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 10px;
  height: 10px;
  background: #ff4081;
  border-radius: 50%;
  cursor: pointer;
}



    /* ==============================
       æ€»æ¨¡å—ï¼šåŒ…è£¹æ‰€æœ‰å†…å®¹
    ============================== */
    .outer-container {
      background-color: #fff;  /* æ€»æ¨¡å—èƒŒæ™¯è‰² */
      border: 2px solid #ccc;  /* æ€»æ¨¡å—è¾¹æ¡†é¢œè‰² */
      border-radius: 8px;      /* æ€»æ¨¡å—åœ†è§’ */
      padding: 20px;           /* æ€»æ¨¡å—å†…è¾¹è· */
      margin: 0 auto;          /* å±…ä¸­æ˜¾ç¤º */
      max-width: 1200px;       /* æœ€å¤§å®½åº¦ï¼Œé€‚åº”å¤§å±ä¸å æ»¡ */
    }

    /* ==============================
       æŒ‰é’®æ ·å¼
    ============================== */
    button {
      background-color: #f6cbdb; /* æŒ‰é’®èƒŒæ™¯è‰²ï¼ˆç²‰è‰²ï¼‰ */
      color: #333;               /* æŒ‰é’®æ–‡å­—é¢œè‰² */
      border: none;              /* æ— è¾¹æ¡† */
      border-radius: 4px;        /* æŒ‰é’®åœ†è§’ */
      cursor: pointer;
      transition: background-color 0.3s;
      padding: 6px 12px;         /* æŒ‰é’®å†…è¾¹è· */
    }
    button:hover {
      background-color: #ff8ab1; /* æŒ‰é’®æ‚¬åœèƒŒæ™¯è‰²ï¼ˆç²‰è‰²åŠ æ·±ï¼‰ */
    }
    
    /* ==============================
       æ ‡é¢˜æ ·å¼
    ============================== */
    header {
      text-align: center;
      margin-bottom: 20px;
    }
    header h1 {
      font-size: 28px;
    }

    /* ==============================
       ä¸»å®¹å™¨ï¼šå·¦å³å¸ƒå±€
    ============================== */
    .main-container {
      display: flex;
      gap: 20px;
      margin-bottom: 20px;
    }

    /* æ‰‹æœºç«¯å“åº”å¼å¸ƒå±€ï¼ˆå‚ç›´å¸ƒå±€ï¼‰ */
    @media (max-width: 600px) {
      .main-container {
        flex-direction: column;
      }
    }

    .column {
      background-color: #fefbf7; /* æ¯ä¸ªæ¨¡å—èƒŒæ™¯è‰² */
      border: 2px solid #e6e2dd;  /* æ¯ä¸ªæ¨¡å—è¾¹æ¡†é¢œè‰² */
      border-radius: 8px;      /* æ¯ä¸ªæ¨¡å—åœ†è§’ */
      padding: 15px;
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    /* ==============================
       å¾…åŠäº‹é¡¹æ¨¡å—
    ============================== */
    .input-module {
      margin-bottom: 15px;
      text-align: center; /* å±…ä¸­å¯¹é½ */
    }

    /* è¾“å…¥æ¡† */
    .input-module input[type="text"] {
      width: 100%;         /* è¾“å…¥æ¡†å®½åº¦ä¸º100% */
      padding: 6px;        /* è¾“å…¥æ¡†å†…è¾¹è· */
      margin-bottom: 6px;  /* ä¸ä¸‹æ–¹æ§ä»¶çš„é—´éš” */
    }

    /* åˆ†ç±»é€‰é¡¹å’Œæ—¥æœŸé€‰æ‹© */
    .input-module select, 
    .input-module input[type="date"] {
      font-size: 14px;
      padding: 6px;
      width: auto;         /* å¦‚æœéœ€è¦ï¼Œä¹Ÿå¯ä»¥ä¿®æ”¹å®½åº¦ */
    }

    .input-module button {
      margin-top: 6px;
      padding: 6px 12px;
    }

    .task-list { margin-bottom: 15px; }
    .clear-module { margin-bottom: 15px; }

    /* ä»»åŠ¡é¡¹ */
    .task {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 8px;
      border: 1px solid #ddd;
      margin-bottom: 8px;
      background-color: #fafafa;  /* ä»»åŠ¡é¡¹èƒŒæ™¯è‰² */
    }

    .task.overdue {
      border-color: red;
      background-color: #ffe6e6; /* é€¾æœŸä»»åŠ¡èƒŒæ™¯è‰² */
    }

    .task .info p {
      margin-bottom: 4px;
      font-size: 12px;
    }

    .task .actions button {
      margin-left: 4px;
      padding: 4px 6px;
      font-size: 10px;
    }

    .completed {
      text-decoration: line-through;
      color: gray;
    }

    /* ==============================
       å°çŒ«äº’åŠ¨åŒº
    ============================== */
    .cat-room {
      margin-bottom: 15px;
    }
    .cat-room h2 {
      font-size: 20px;
      margin-bottom: 10px;
    }

    .cat-info p {
      font-size: 14px;
      margin-bottom: 8px;
    }

    .interaction-options button {
      margin-right: 8px;
      padding: 6px 10px;
      font-size: 12px;
    }

    .current-outfit {
      font-size: 14px;
      margin-bottom: 10px;
    }

    .diary-module {
      flex: 1;
      background-color: #fafafa; /* å°çŒ«æ—¥è®°èƒŒæ™¯è‰² */
      border: 1px solid #ddd;    /* æ—¥è®°åŒºåŸŸè¾¹æ¡† */
      padding: 8px;
      overflow-y: auto;
      font-size: 10px;
    }
    .diary-entry { margin-bottom: 6px; }

    /* ==============================
       ç§¯åˆ†å•†åº—åŒºåŸŸ
    ============================== */
    .shop-section {
      background-color: #fff;  /* å•†åº—åŒºåŸŸèƒŒæ™¯è‰² */
      border: 2px solid #ccc;  /* å•†åº—åŒºåŸŸè¾¹æ¡† */
      border-radius: 8px;
      padding: 15px;
      text-align: center;
      margin-bottom: 10px;
    }

    .shop-section p {
      font-size: 14px;
      margin: 8px 0;
    }

    /* ==============================
       é¡µè„š
    ============================== */
    footer {
      text-align: center;
      font-size: 10px;
      color: #666;
    }

    /* ==============================
       åŠ¨ç”»
    ============================== */
    .task.completed-animation {
      animation: completedAnim 0.5s;
    }

    @keyframes completedAnim {
      0% { background-color: #d4edda; }
      100% { background-color: #fafafa; }
    }

    /* ==============================
       å¼•å…¥åƒç´ é£æ ¼å­—ä½“
    ============================== */
    @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

    #custom-title {
  font-family: 'Jacquarda Bastarda 9';  /* ä½¿ç”¨ä½ é€‰æ‹©çš„å­—ä½“ */
}
  </style>
</head>
<body>
  <!-- æ€»æ¨¡å—å¼€å§‹ -->
  <div class="outer-container">
    <header>
      <h1>æ€¡ã®Todo List ğŸ“</h1>
    </header>
    <main class="main-container">
      <!-- å·¦ä¾§å¾…åŠäº‹é¡¹æ¨¡å— -->
      <div class="column" id="taskColumn">
        <div class="input-module">
          <input type="text" id="taskInput" placeholder="è¾“å…¥å¾…åŠäº‹é¡¹...">
          <div style="display: flex; gap: 6px; justify-content: center; margin-top: 6px;">
            <select id="taskType">
              <option value="daily">æ¯æ—¥å¾…åŠ</option>
              <option value="once">ä¸€æ¬¡æ€§å¾…åŠ</option>
            </select>
            <input type="date" id="taskDeadline">
          </div>
          <button id="addTaskBtn">æ·»åŠ ä»»åŠ¡</button>
        </div>
        <div class="task-list" id="taskList">
          <!-- ä»»åŠ¡åˆ—è¡¨åŠ¨æ€ç”Ÿæˆ -->
        </div>
        <div class="clear-module">
          <button id="clearCompletedBtn" style="width: 100%; background-color: #F5B6CE;">æ¸…ç†å·²å®Œæˆä»»åŠ¡</button>
        </div>
      </div>
     <!-- å°çŒ«äº’åŠ¨åŒº -->
<div class="column" id="catColumn">
  <div class="cat-room" style="display: flex; justify-content: space-between;">
    <!-- å°çŒ«ä¿¡æ¯å·¦ä¾§ -->
    <div style="flex: 1;">
      <h2>ğŸˆ å°çŒ«çš„æˆ¿é—´</h2>
      <p>ç­‰çº§ï¼šLv.1-5</p>
      <p>ğŸ’• äº’åŠ¨é€‰é¡¹</p>
      <div class="interaction-options">
        <button id="momoBtn">âœ‹ æ‘¸æ‘¸</button>
        <button id="feedBtn">ğŸ— æŠ•å–‚</button>
        <button id="changeBtn">ğŸ‘— æ¢è£…</button>
      </div>
      <p style="margin-top:10px;">ğŸ€ å½“å‰è£…æ‰®</p>
      <p class="current-outfit">ğŸ± å…”è€³å¸½ + é¢†ç»“ ğŸ€ ï¼ˆç¤ºä¾‹ï¼‰</p>
      <p>å½“å‰æ»¡è¶³åº¦: <span id="satisfactionDisplay"></span></p> <!-- ç§»åŠ¨åˆ°è¿™é‡Œ -->
    </div>
    <!-- å°çŒ«å›¾åƒ -->
<div style="flex: 0.5; text-align: right;">
  <div class="cat-container">
    <!-- å°çŒ«çš„ä¸ŠåŠèº« -->
    <img src="https://s2.loli.net/2025/02/26/S4OrRjCQ1cZzF6a.gif" alt="å°çŒ«ä¸ŠåŠèº«" class="cat-upper" />
  
    <!-- å°çŒ«çš„ä¸‹åŠèº« -->
    <img src="https://s2.loli.net/2025/02/26/i3n6tq4j9Hbfv7N.gif" alt="å°çŒ«ä¸‹åŠèº«" class="cat-lower" />
  </div>
  
</div>
  </div>
<!-- å°çŒ«æ—¥è®°éƒ¨åˆ† -->
<div class="diary-module" id="diaryModule" style="max-height: 300px; overflow-y: auto;"> <!-- æ»šåŠ¨æ¡è®¾ç½®ï¼Œmax-height å¯ä¿®æ”¹ -->
  <p style="text-align:center; font-weight: bold; margin-bottom: 6px;">ğŸ“– å°çŒ«æ—¥è®°</p>
  <div id="diaryList">
    <!-- æ—¥è®°è®°å½•æ˜¾ç¤º -->
  </div>
</div>


</div>

    </main>
    <!-- ç§¯åˆ†å•†åº—åŒºåŸŸ -->
    <section class="shop-section">
      <h2>ğŸ ç§¯åˆ†å•†åº—</h2>
      <p>å½“å‰ç§¯åˆ†: <span id="pointsDisplay">0</span></p>
      <div>
        <button id="petShopBtn">âœ‹ è´­ä¹°æ‘¸æ‘¸åˆ¸ï¼ˆ2åˆ†ï¼‰+1ğŸ©·</button>
        <button id="snackShopBtn">ğŸ— è´­ä¹°é›¶é£Ÿï¼ˆ3åˆ†ï¼‰+1ğŸ©·</button>
        <button id="dressShopBtn">ğŸ‘— è´­ä¹°è£…æ‰®ï¼ˆ5åˆ†ï¼‰+2ğŸ©·</button>
      </div>
      <!-- æ¸…é™¤å…¨éƒ¨æ•°æ®æŒ‰é’® -->
      <button id="clearDataBtn" style="margin-top:10px; background-color: #ff6666; color: #fff;">æ¸…é™¤å…¨éƒ¨æ•°æ®</button>
    </section>
    <footer>
      <h1 id="custom-title">Copyright by æ€¡ & chatGPT ğŸ’™</h1>
    </footer>
  </div>
      <!-- éŸ³ä¹æ’­æ”¾å™¨åŒºåŸŸ -->
  <div id="music-player" class="music-player">
    <button id="play-pause-btn" class="play-pause-btn">â–¶</button>
    <div class="song-info">
      <p id="song-name" class="song-name">Song Title</p>
      <input type="range" id="progress-bar" class="progress-bar" value="0" max="100">
    </div>
    <audio id="audio" src="assets/music/ireallywanttostayatyourhouse.mp3" preload="auto"></audio>
  </div>
  
  <!-- æ€»æ¨¡å—ç»“æŸ -->

  <script>
    // ===== æ•°æ®å˜é‡ =====
    let tasks = [];
    let points = 0;
    let satisfaction = 0; // æœ€å¤§ä¸º10
    let diaryLogs = [];
    const postponeThreshold = 3; // æ¨è¿Ÿæ¬¡æ•°é˜ˆå€¼

    // ===== é¡µé¢åŠ è½½æ—¶æ¢å¤æ•°æ® =====
    window.onload = function() {
      if (localStorage.getItem('tasks')) {
        tasks = JSON.parse(localStorage.getItem('tasks'));
      }
      if (localStorage.getItem('points')) {
        points = parseInt(localStorage.getItem('points'));
      }
      if (localStorage.getItem('satisfaction')) {
        satisfaction = parseInt(localStorage.getItem('satisfaction'));
      }
      if (localStorage.getItem('diaryLogs')) {
        diaryLogs = JSON.parse(localStorage.getItem('diaryLogs'));
      }
      renderTasks();
      updatePoints();
      updateSatisfaction();
      updateDiary();
    };

    // ===== ä¿å­˜æ•°æ® =====
    function saveData() {
      localStorage.setItem('tasks', JSON.stringify(tasks));
      localStorage.setItem('points', points);
      localStorage.setItem('satisfaction', satisfaction);
      localStorage.setItem('diaryLogs', JSON.stringify(diaryLogs));
    }

 // ===== æ—¥è®°è®°å½•ï¼Œæ¯æ¡è®°å½•å‰åŠ [MM/DD/å°æ—¶ï¼šåˆ†é’Ÿ] =====
 function logAction(message) {
  const date = new Date();
  const formattedDate = `${date.getMonth() + 1}/${date.getDate()} ${padZero(date.getHours())}:${padZero(date.getMinutes())}`; // MM/DD/å°æ—¶ï¼šåˆ†é’Ÿ
  const logEntry = `[${formattedDate}] ${message}`;
  diaryLogs.push(logEntry); // ç¡®ä¿æ—¥è®°è®°å½•è¢«æ­£ç¡®æ¨å…¥æ•°ç»„
  updateDiary(); // æ›´æ–°æ˜¾ç¤º
  saveData(); // ä¿å­˜æ•°æ®
}


// è¡¥é›¶å‡½æ•°ï¼Œç¡®ä¿å°æ—¶å’Œåˆ†é’Ÿä¸ºä¸¤ä½æ•°
function padZero(num) {
  return num < 10 ? '0' + num : num;
}




    // ===== å¾…åŠäº‹é¡¹æ¨¡å—ç›¸å…³å‡½æ•° =====
    function renderTasks() {
      const taskList = document.getElementById('taskList');
      taskList.innerHTML = "";
      const now = new Date().toISOString().split("T")[0];
      tasks.forEach(task => {
        const taskDiv = document.createElement('div');
        taskDiv.className = "task";
        if (!task.completed && task.deadline && task.deadline < now) {
          taskDiv.classList.add("overdue");
        }
        // ----- ä»»åŠ¡ä¿¡æ¯ -----
        const infoDiv = document.createElement('div');
        infoDiv.className = "info";
        const taskText = document.createElement('p');
        taskText.textContent = task.text;
        if (task.completed) {
          taskText.classList.add("completed");
        }
        const taskMeta = document.createElement('p');
        taskMeta.textContent = `${task.type === "daily" ? "æ¯æ—¥å¾…åŠ" : "ä¸€æ¬¡æ€§å¾…åŠ"}${task.deadline ? " | æˆªæ­¢æ—¥æœŸ: " + task.deadline : ""}`;
        infoDiv.appendChild(taskText);
        infoDiv.appendChild(taskMeta);

        // ----- æ“ä½œæŒ‰é’® -----
        const actionsDiv = document.createElement('div');
        actionsDiv.className = "actions";

        // å®Œæˆä»»åŠ¡æŒ‰é’®
        const completeBtn = document.createElement('button');
        completeBtn.textContent = task.completed ? "å·²å®Œæˆ" : "å®Œæˆ";
        completeBtn.addEventListener('click', () => {
          if (!task.completed) {
            task.completed = true;
            points += 1;
            updatePoints();
            taskDiv.classList.add("completed-animation");
            setTimeout(() => {
              taskDiv.classList.remove("completed-animation");
            }, 500);
            logAction(`å®Œæˆä»»åŠ¡: ${task.text}`);
            saveData();
            renderTasks();
          }
        });
        actionsDiv.appendChild(completeBtn);

        // ç¼–è¾‘ä»»åŠ¡æŒ‰é’®
        const editBtn = document.createElement('button');
        editBtn.textContent = "ç¼–è¾‘";
        editBtn.addEventListener('click', () => {
          const newText = prompt("ä¿®æ”¹ä»»åŠ¡å†…å®¹ï¼š", task.text);
          if (newText !== null && newText.trim() !== "") {
            logAction(`ç¼–è¾‘ä»»åŠ¡: ${task.text} æ”¹ä¸º ${newText.trim()}`);
            task.text = newText.trim();
            saveData();
            renderTasks();
          }
        });
        actionsDiv.appendChild(editBtn);

        // åˆ é™¤ä»»åŠ¡æŒ‰é’®
        const deleteBtn = document.createElement('button');
        deleteBtn.textContent = "åˆ é™¤";
        deleteBtn.addEventListener('click', () => {
          if (confirm("ç¡®å®šåˆ é™¤è¯¥ä»»åŠ¡å—ï¼Ÿ")) {
            logAction(`åˆ é™¤ä»»åŠ¡: ${task.text}`);
            tasks = tasks.filter(t => t.id !== task.id);
            saveData();
            renderTasks();
          }
        });
        actionsDiv.appendChild(deleteBtn);

        // æ¨è¿Ÿä»»åŠ¡æŒ‰é’®
        const postponeBtn = document.createElement('button');
        postponeBtn.textContent = "æ¨è¿Ÿ";
        postponeBtn.addEventListener('click', () => {
          task.postponeCount += 1;
          logAction(`æ¨è¿Ÿä»»åŠ¡: ${task.text} (æ¨è¿Ÿæ¬¡æ•°: ${task.postponeCount})`);
          if (task.postponeCount > postponeThreshold) {
            alert("å®å®ä½ å†æ‹–å°±è¦è¢«æˆ‘æŠ“åŒ…äº†ï¼");
          }
          if (task.deadline) {
            let d = new Date(task.deadline);
            d.setDate(d.getDate() + 1);
            task.deadline = d.toISOString().split("T")[0];
          }
          saveData();
          renderTasks();
        });
        actionsDiv.appendChild(postponeBtn);

        taskDiv.appendChild(infoDiv);
        taskDiv.appendChild(actionsDiv);
        taskList.appendChild(taskDiv);
      });
    }

    document.getElementById('addTaskBtn').addEventListener('click', () => {
      const taskInput = document.getElementById('taskInput');
      const taskType = document.getElementById('taskType').value;
      const taskDeadline = document.getElementById('taskDeadline').value;
      if (taskInput.value.trim() === "") {
        alert("è¯·å…ˆè¾“å…¥ä»»åŠ¡å†…å®¹ï¼");
        return;
      }
      const newTask = {
        id: Date.now(),
        text: taskInput.value.trim(),
        type: taskType,
        deadline: taskDeadline,
        completed: false,
        postponeCount: 0
      };
      tasks.push(newTask);
      logAction(`æ·»åŠ ä»»åŠ¡: ${newTask.text}`);
      saveData();
      renderTasks();
      taskInput.value = "";
    });

    document.getElementById('clearCompletedBtn').addEventListener('click', () => {
      if (confirm("ç¡®å®šæ¸…ç†æ‰€æœ‰å·²å®Œæˆçš„ä»»åŠ¡å—ï¼Ÿ")) {
        logAction("æ¸…ç†å·²å®Œæˆä»»åŠ¡");
        tasks = tasks.filter(task => !task.completed);
        saveData();
        renderTasks();
      }
    });

    // ===== æ›´æ–°ç§¯åˆ†æ˜¾ç¤º =====
    function updatePoints() {
      document.getElementById('pointsDisplay').textContent = points;
    }

    // ===== æ›´æ–°æ»¡è¶³åº¦æ˜¾ç¤ºï¼ˆç”¨ğŸ’–è¡¨ç¤ºï¼Œæœ€å¤š10ä¸ªï¼‰ =====
    function updateSatisfaction() {
      let hearts = "";
      for (let i = 0; i < satisfaction && i < 10; i++) {
        hearts += "ğŸ’–";
      }
      document.getElementById('satisfactionDisplay').textContent = hearts;
    }

// ===== æ›´æ–°æ—¥è®°è®°å½•æ˜¾ç¤º =====
function updateDiary() {
  const diaryList = document.getElementById('diaryList');
  diaryList.innerHTML = ""; // æ¸…ç©ºæ—§çš„æ—¥è®°

  // ç¡®ä¿æŒ‰ç…§æœ€æ–°æ ¼å¼æ˜¾ç¤º
  for (let i = diaryLogs.length - 1; i >= 0; i--) {
    const entry = document.createElement('div');
    entry.className = "diary-entry";
    entry.textContent = diaryLogs[i]; // æ—¥è®°å†…å®¹
    diaryList.appendChild(entry);
  }
}


    // ===== å°çŒ«äº’åŠ¨åŒºæŒ‰é’®äº‹ä»¶ =====
    document.getElementById('momoBtn').addEventListener('click', () => {
      logAction("äº’åŠ¨ï¼šå°çŒ«è¢«æ‘¸æ‘¸äº†");
      alert("ä½ è½»è½»åœ°æ‘¸äº†å°çŒ«ä¸€ä¸‹~");
    });
    document.getElementById('feedBtn').addEventListener('click', () => {
      logAction("äº’åŠ¨ï¼šå°çŒ«è¢«æŠ•å–‚äº†");
      alert("ä½ ç»™å°çŒ«æŠ•å–‚äº†ç¾å‘³çš„é£Ÿç‰©~");
    });
    document.getElementById('changeBtn').addEventListener('click', () => {
      logAction("äº’åŠ¨ï¼šå°çŒ«æ¢è£…äº†");
      alert("å°çŒ«æ¢ä¸Šäº†æ–°è£…æ‰®ï¼Œçœ‹èµ·æ¥æ›´å¯çˆ±äº†~");
    });

    // ===== ç§¯åˆ†å•†åº—åŠŸèƒ½ =====
    const shopItems = {
      pet: { cost: 2, satisfy: 1, action: "è´­ä¹°æ‘¸æ‘¸åˆ¸" },
      snack: { cost: 3, satisfy: 1, action: "è´­ä¹°é›¶é£Ÿ" },
      dress: { cost: 5, satisfy: 2, action: "è´­ä¹°è£…æ‰®" }
    };

    document.getElementById('petShopBtn').addEventListener('click', () => {
      const item = shopItems.pet;
      if (points < item.cost) {
        alert("ç§¯åˆ†ä¸è¶³ï¼Œæ— æ³•è´­ä¹°æ‘¸æ‘¸åˆ¸ï¼");
        return;
      }
      points -= item.cost;
      satisfaction = Math.min(10, satisfaction + item.satisfy);
      logAction(item.action);
      updatePoints();
      updateSatisfaction();
      saveData();
    });

    document.getElementById('snackShopBtn').addEventListener('click', () => {
      const item = shopItems.snack;
      if (points < item.cost) {
        alert("ç§¯åˆ†ä¸è¶³ï¼Œæ— æ³•è´­ä¹°é›¶é£Ÿï¼");
        return;
      }
      points -= item.cost;
      satisfaction = Math.min(10, satisfaction + item.satisfy);
      logAction(item.action);
      updatePoints();
      updateSatisfaction();
      saveData();
    });

    document.getElementById('dressShopBtn').addEventListener('click', () => {
      const item = shopItems.dress;
      if (points < item.cost) {
        alert("ç§¯åˆ†ä¸è¶³ï¼Œæ— æ³•è´­ä¹°è£…æ‰®ï¼");
        return;
      }
      points -= item.cost;
      satisfaction = Math.min(10, satisfaction + item.satisfy);
      logAction(item.action);
      updatePoints();
      updateSatisfaction();
      saveData();
    });

    // ===== æ¸…é™¤å…¨éƒ¨æ•°æ®æŒ‰é’®äº‹ä»¶ =====
    document.getElementById('clearDataBtn').addEventListener('click', () => {
      if (confirm("ç¡®å®šè¦æ¸…é™¤å…¨éƒ¨æ•°æ®å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ï¼")) {
        localStorage.clear();
        location.reload();
      }
    });

    // è·å–é¡µé¢å…ƒç´ 
const playPauseBtn = document.getElementById("play-pause-btn");
const songName = document.getElementById("song-name");
const progressBar = document.getElementById("progress-bar");
const audio = document.getElementById("audio");

// å½“å‰æ­Œæ›²ä¿¡æ¯
const songs = [
  { name: "I Really Want to Stay at Your House", src: "assets/music/ireallywanttostayatyourhouse.mp3" }
];

let isPlaying = false;

// åˆå§‹æ­Œæ›²åŠ è½½
audio.src = songs[0].src;
songName.textContent = songs[0].name;

// æ’­æ”¾/æš‚åœæŒ‰é’®ç‚¹å‡»äº‹ä»¶
playPauseBtn.addEventListener("click", () => {
  if (isPlaying) {
    audio.pause();
    playPauseBtn.textContent = "â–¶"; // æ˜¾ç¤ºæ’­æ”¾ç¬¦å·
  } else {
    audio.play();
    playPauseBtn.textContent = "âšâš"; // æ˜¾ç¤ºæš‚åœç¬¦å·
  }
  isPlaying = !isPlaying;
});

// æ›´æ–°æ­Œæ›²è¿›åº¦
audio.addEventListener("timeupdate", () => {
  const progress = (audio.currentTime / audio.duration) * 100;
  progressBar.value = progress;
});

// å…è®¸ç”¨æˆ·æ‹–åŠ¨è¿›åº¦æ¡
progressBar.addEventListener("input", (e) => {
  const newTime = (e.target.value / 100) * audio.duration;
  audio.currentTime = newTime;
});

// æ›´æ–°æ­Œæ›²ä¿¡æ¯å’Œè¿›åº¦æ¡æ—¶ï¼Œå½“æ­Œæ›²æ’­æ”¾ç»“æŸæ—¶
audio.addEventListener("ended", () => {
  isPlaying = false;
  playPauseBtn.textContent = "â–¶"; // æ¢å¤æ’­æ”¾ç¬¦å·
});

   // è®¾ç½®åˆå§‹è¿›åº¦æ¡ä¸ºæœ€å·¦è¾¹
   progressBar.value = 0;

  </script>
</body>
</html>
